/*	-WHAT IS THIS?-
	This file adds optional material to "MPMB's Character Record Sheet" found at https://flapkan.com/mpmb/charsheets
	Import this file using the "Add Extra Materials" bookmark.

	-KEEP IN MIND-
	It is recommended to enter the code in a fresh sheet before adding any other information (i.e. before making your character with it).
*/

/*  -INFORMATION-
	Subject:    Class (Subclass Supplement)
	Effect:     Adds additional Shamanic Calling options ("Speaker" subclasses) for the Shaman class by Michael Wolf (DMs Guild)
	Author:     DruidAllanon42
	Repository: https://github.com/DruidAllanon42
	Version:    0.1.0
	Date:       2026-01-10

	Credits:
	- Original Shaman class: Michael Wolf
	- Original transcription for MPMB: Derek, Fourleafclov, and MorePurpleMoreBetter
	- This supplement (additional subclasses): DruidAllanon42

	Original Shaman link:
	https://www.dmsguild.com/product/170851/Shaman-Class-5e
*/

var iFileName = "Shaman - Speakers Supplemental [by DruidAllanon42].js";
RequiredSheetVersion(12.999);

// add homebrew source (DruidAllanon42)
SourceList["DA42:SS"] = {
	name : "DruidAllanon42: Shaman Speaker Supplement",
	abbreviation : "DA42:SS",
	group : "Homebrew",
	url : "https://github.com/DruidAllanon42",
	date : "2026/01/10"
};

// ---- Hook: add new Speakers to the existing Shaman class (if present) ----
if (ClassList["shaman"] && ClassList["shaman"].subclasses && ClassList["shaman"].subclasses[1]) {
	var shamanSubs = ClassList["shaman"].subclasses[1];

	if (shamanSubs.indexOf("shaman-speaker of the veil") === -1) shamanSubs.push("shaman-speaker of the veil");
	if (shamanSubs.indexOf("shaman-speaker of mist") === -1) shamanSubs.push("shaman-speaker of mist");
	if (shamanSubs.indexOf("shaman-speaker of threads") === -1) shamanSubs.push("shaman-speaker of threads");
	if (shamanSubs.indexOf("shaman-speaker of thorns") === -1) shamanSubs.push("shaman-speaker of thorns");
	if (shamanSubs.indexOf("shaman-speaker of seasons") === -1) shamanSubs.push("shaman-speaker of seasons");
	if (shamanSubs.indexOf("shaman-speaker of glamour") === -1) shamanSubs.push("shaman-speaker of glamour");
	if (shamanSubs.indexOf("shaman-speaker of masks") === -1) shamanSubs.push("shaman-speaker of masks");
	if (shamanSubs.indexOf("shaman-speaker of venom") === -1) shamanSubs.push("shaman-speaker of venom");
	if (shamanSubs.indexOf("shaman-speaker of roots") === -1) shamanSubs.push("shaman-speaker of roots");
	if (shamanSubs.indexOf("shaman-speaker of the wild hunt") === -1) shamanSubs.push("shaman-speaker of the wild hunt");
	if (shamanSubs.indexOf("shaman-speaker of hearth") === -1) shamanSubs.push("shaman-speaker of hearth");
}

/* =======================================================================================
   SPEAKER SUBCLASSES
   ======================================================================================= */

// ============================================================================
// Speaker of the Veil (Shamanic Calling)
// Author: DruidAllanon42
// ============================================================================

ClassSubList["shaman-speaker of the veil"] = {
	regExpSearch : /^(?=.*speaker)(?=.*veil).*$/i,
	subname : "Speaker of the Veil",
	source : ["DA42:SS", 1],

	// Calling Spells (always prepared)
	spellcastingExtra : [
		"false life", "protection from evil and good",
		"gentle repose", "blur",
		"feign death", "spirit guardians",
		"etherealness", "death ward",
		"negative energy flood", "antilife shell"
	],

	features : {

		"subclassfeature1" : {
			name : "Blessings of the Veil",
			source : ["DA42:SS", 1],
			minlevel : 1,

			skills : ["Insight"],
			skillstxt : "\n\n" + toUni("Blessings of the Veil") + ": Insight.",

			description : desc([
				"I learn the Spare the Dying, Toll the Dead, and Thaumaturgy cantrips as shaman cantrips",
				"I gain proficiency in Insight",
				"I can tell if a creature I can see within 30 ft is alive, undead, or neither (e.g. construct)"
			]),

			spellcastingBonus : [{
				name : "Blessings of the Veil",
				spells : ["spare the dying", "toll the dead", "thaumaturgy"],
				selection : ["spare the dying", "toll the dead", "thaumaturgy"],
				times : 3
			}]
		},

		"subclassfeature1.1" : {
			name : "Veilspeaker",
			source : ["DA42:SS", 1],
			minlevel : 1,
			description : desc([
				"As an action, I focus on a corpse, grave, dying creature, or a location where a creature died within 24 hours",
				"I may ask the attending spirits three questions about identity/emotion, circumstances of death, or direction of departure",
				"Spirits answer truthfully but symbolically; once used on a creature or location, I can't use it there again until a long rest"
			]),
			action : [["action", ""]]
		},

		"subclassfeature6" : {
			name : "Step Beyond",
			source : ["DA42:SS", 1],
			minlevel : 6,
			description : desc([
				"As a reaction when hit by an attack I can see, I partially phase until the start of my next turn",
				"I gain resistance to the triggering attack's damage",
				"I can move through creatures and objects as difficult terrain",
				"If I end my movement inside an object, I'm shunted to the nearest empty space and take force damage equal to my Cha modifier"
			]),
			usages : 1,
			recovery : "short rest",
			action : [["reaction", ""]]
		},

		"subclassfeature10" : {
			name : "Half-Seen, Half-Remembered",
			source : ["DA42:SS", 1],
			minlevel : 10,
			description : desc([
				"I have advantage on saving throws against being frightened or charmed",
				"Invisible and ethereal creatures within 30 ft can't gain advantage on attack rolls against me",
				"I can perceive the presence (but not exact location) of incorporeal creatures within 30 ft"
			]),
			savetxt : { adv_vs : ["being frightened", "being charmed"] }
		},

		"subclassfeature14" : {
			name : "Bearer of the Crossing",
			source : ["DA42:SS", 1],
			minlevel : 14,
			description : desc([
				"Once per long rest, as an action, I create a Crossing at a point I can see within 30 ft for 1 minute",
				"I and allied creatures within 10 ft can move through creatures and objects as difficult terrain",
				"Opportunity attacks against creatures benefiting from the Crossing are made with disadvantage",
				"If a creature drops to 0 HP within the Crossing, it immediately stabilizes",
				"When the Crossing ends, any creature inside an object is safely shunted to the nearest open space"
			]),
			usages : 1,
			recovery : "long rest",
			action : [["action", ""]]
		}
	}
};

// ============================================================================
// Speaker of Mist (Shamanic Calling)
// Author: DruidAllanon42
// ============================================================================

ClassSubList["shaman-speaker of mist"] = {
	regExpSearch : /^(?=.*speaker)(?=.*mist).*$/i,
	subname : "Speaker of Mist",
	source : ["DA42:SS", 2],

	spellcastingExtra : [
		"fog cloud", "disguise self",
		"misty step", "pass without trace",
		"gaseous form", "major image",
		"greater invisibility", "hallucinatory terrain",
		"mislead", "seeming"
	],

	features : {

		"subclassfeature1" : {
			name : "Blessings of Mist",
			source : ["DA42:SS", 2],
			minlevel : 1,

			skills : ["Stealth"],
			skillstxt : "\n\n" + toUni("Blessings of Mist") + ": Stealth.",

			description : desc([
				"I learn the Minor Illusion, Message, and Prestidigitation cantrips as shaman cantrips",
				"I gain proficiency in Stealth"
			]),

			spellcastingBonus : [{
				name : "Blessings of Mist",
				spells : ["minor illusion", "message", "prestidigitation"],
				selection : ["minor illusion", "message", "prestidigitation"],
				times : 3
			}]
		},

		"subclassfeature1.1" : {
			name : "Mistspeaker",
			source : ["DA42:SS", 2],
			minlevel : 1,
			description : desc([
				"As an action, I commune with mist, fog, or low cloud within 30 ft (or draw forth a thin veil with my breath)",
				"I may ask the mist three questions about what moved through it nearby within the last hour (DM adjudicates)",
				"It answers in impressions (direction/number/speed/mood), not precise details",
				"Once I speak with mist in a specific 1-mile area, I can't do so again there until a long rest"
			]),
			action : [["action", ""]]
		},

		"subclassfeature6" : {
			name : "Vanish Into Haze",
			source : ["DA42:SS", 2],
			minlevel : 6,
			description : desc([
				"As a reaction when I'm targeted by an attack roll or when I fail a Dex saving throw, I blur into haze",
				"Until the start of my next turn, I'm lightly obscured and can move up to 10 ft without provoking opportunity attacks",
				"If the trigger was an attack roll, the attacker has disadvantage on that roll"
			]),
			usages : 1,
			recovery : "short rest",
			action : [["reaction", ""]]
		},

		"subclassfeature10" : {
			name : "Unfindable Shape",
			source : ["DA42:SS", 2],
			minlevel : 10,
			description : desc([
				"I have resistance to cold damage",
				"I have advantage on Stealth checks while lightly obscured, and I can attempt to hide while only lightly obscured",
				"Creatures don't gain advantage on attack rolls against me solely because they are unseen (e.g. invisible)"
			]),
			dmgres : ["Cold"],
			skillstxt : "\n\n" + toUni("Unfindable Shape") + ": Adv. on Stealth checks while lightly obscured; can Hide while only lightly obscured."
		},

		"subclassfeature14" : {
			name : "Mistwalk",
			source : ["DA42:SS", 2],
			minlevel : 14,
			description : desc([
				"Once per long rest, as an action, I become drifting mist for 1 minute (no concentration)",
				"I gain a flying speed equal to my walking speed and can move through spaces as narrow as 1 inch",
				"I can move through creatures/objects as difficult terrain; if I end inside an object, I'm shunted to the nearest empty space",
				"While Mistwalk lasts, I have resistance to nonmagical bludgeoning, piercing, and slashing damage"
			]),
			usages : 1,
			recovery : "long rest",
			action : [["action", ""]]
		}
	}
};

// ============================================================================
// Speaker of Threads (Shamanic Calling)
// Author: DruidAllanon42
// ============================================================================

ClassSubList["shaman-speaker of threads"] = {
	regExpSearch : /^(?=.*speaker)(?=.*threads).*$/i,
	subname : "Speaker of Threads",
	source : ["DA42:SS", 3],

	spellcastingExtra : [
		"bane", "feather fall",
		"hold person", "silence",
		"bestow curse", "clairvoyance",
		"divination", "freedom of movement",
		"hold monster", "scrying"
	],

	features : {

		"subclassfeature1" : {
			name : "Blessings of Threads",
			source : ["DA42:SS", 3],
			minlevel : 1,

			description : desc([
				"I learn the Guidance, Resistance, and Mage Hand cantrips as shaman cantrips",
				"I gain proficiency in Insight or Perception (choose one)"
			]),

			skillstxt : "\n\n" + toUni("Blessings of Threads") + ": Choose one from Insight or Perception.",

			spellcastingBonus : [{
				name : "Blessings of Threads",
				spells : ["guidance", "resistance", "mage hand"],
				selection : ["guidance", "resistance", "mage hand"],
				times : 3
			}]
		},

		"subclassfeature1.1" : {
			name : "Threadreader",
			source : ["DA42:SS", 3],
			minlevel : 1,
			description : desc([
				"As a reaction when a creature I can see within 60 ft makes an ability check, attack roll, or saving throw, I glimpse its thread",
				"I learn whether the roll had advantage, disadvantage, or neither, and whether magic is influencing it (DM gives yes/no)",
				"I can use this reaction a number of times equal to my Cha modifier (min 1), regaining all uses on a long rest"
			]),
			usages : "Cha mod",
			recovery : "long rest",
			action : [["reaction", ""]]
		},

		"subclassfeature6" : {
			name : "Tug the Thread",
			source : ["DA42:SS", 3],
			minlevel : 6,
			description : desc([
				"As a reaction when a creature I can see within 60 ft makes an attack roll, ability check, or saving throw, I add or subtract 1d4",
				"I choose after the roll but before the outcome is known",
				"I can use this feature a number of times equal to my proficiency bonus, regaining uses on a short or long rest"
			]),
			usages : "Proficiency bonus per ",
			recovery : "short rest",
			action : [["reaction", ""]]
		},

		"subclassfeature10" : {
			name : "Woven Reflex",
			source : ["DA42:SS", 3],
			minlevel : 10,
			description : desc([
				"I can't be surprised while I'm conscious",
				"When I use Tug the Thread, I may roll a d6 instead of a d4; once I do so, I can't do so again until a long rest"
			])
		},

		"subclassfeature14" : {
			name : "Cut the Knot",
			source : ["DA42:SS", 3],
			minlevel : 14,
			description : desc([
				"Once per long rest, as a reaction when I or an ally within 60 ft is hit by an attack or fails a saving throw, I sever the connection",
				"I force the attacker to reroll the attack roll or force the target to reroll the saving throw (my choice); the reroll must be used",
				"Then I or that ally can move up to 15 ft without provoking opportunity attacks"
			]),
			usages : 1,
			recovery : "long rest",
			action : [["reaction", ""]]
		}
	}
};

// ============================================================================
// Speaker of Thorns (Shamanic Calling)
// Author: DruidAllanon42
// ============================================================================

ClassSubList["shaman-speaker of thorns"] = {
	regExpSearch : /^(?=.*speaker)(?=.*thorns).*$/i,
	subname : "Speaker of Thorns",
	source : ["DA42:SS", 4],

	spellcastingExtra : [
		"entangle", "sanctuary",
		"spike growth", "warding bond",
		"plant growth", "spirit shroud",
		"guardian of nature", "grasping vine",
		"antilife shell", "wall of thorns"
	],

	features : {

		"subclassfeature1" : {
			name : "Blessings of Thorns",
			source : ["DA42:SS", 4],
			minlevel : 1,

			skills : ["Nature"],
			skillstxt : "\n\n" + toUni("Blessings of Thorns") + ": Nature.",

			description : desc([
				"I learn the Thorn Whip, Druidcraft, and Primal Savagery cantrips as shaman cantrips",
				"I gain proficiency in Nature",
				"Difficult terrain created by nonmagical plants does not cost me extra movement"
			]),

			spellcastingBonus : [{
				name : "Blessings of Thorns",
				spells : ["thorn whip", "druidcraft", "primal savagery"],
				selection : ["thorn whip", "druidcraft", "primal savagery"],
				times : 3
			}]
		},

		"subclassfeature1.1" : {
			name : "Thornspeaker",
			source : ["DA42:SS", 4],
			minlevel : 1,
			description : desc([
				"As an action, I speak with a hedge, bramble, treeline, root network, or other natural boundary within 30 ft",
				"I may ask the thorn-spirits three questions about recent crossings/lingering, hostility/respect, and directions",
				"They answer in sensations (tension/tearing/pressure/calm), not exact words",
				"Once I speak with a specific boundary, I can't do so again until a long rest"
			]),
			action : [["action", ""]]
		},

		"subclassfeature6" : {
			name : "Barbed Reprisal",
			source : ["DA42:SS", 4],
			minlevel : 6,
			description : desc([
				"When a creature I can see within 30 ft moves willingly into/through difficult terrain or enters my reach without my consent, I can react",
				"It takes piercing damage equal to my Cha modifier and its speed is reduced by 10 ft until the end of its turn",
				"I can use this a number of times equal to my proficiency bonus, regaining uses on a short or long rest"
			]),
			usages : "Proficiency bonus per ",
			recovery : "short rest",
			action : [["reaction", ""]]
		},

		"subclassfeature10" : {
			name : "Living Boundary",
			source : ["DA42:SS", 4],
			minlevel : 10,
			description : desc([
				"I have resistance to piercing damage",
				"Creatures provoke opportunity attacks from me even if they take Disengage while within 10 ft of me, unless friendly to me",
				"When a hostile creature starts its turn within 10 ft of me, its speed is reduced by 10 ft until the start of its next turn"
			]),
			dmgres : ["Piercing"]
		},

		"subclassfeature14" : {
			name : "Crown of Briars",
			source : ["DA42:SS", 4],
			minlevel : 14,
			description : desc([
				"Once per long rest, as an action, I conjure a Briar Ward centered on me for 1 minute",
				"Hostiles treat the area within 20 ft as difficult terrain",
				"First time on each turn a hostile moves within the ward, it takes piercing damage equal to my proficiency bonus",
				"Allies within the ward have adv. on saves vs being grappled, restrained, or knocked prone"
			]),
			usages : 1,
			recovery : "long rest",
			action : [["action", ""]]
		}
	}
};

// ============================================================================
// Speaker of Seasons (Shamanic Calling)
// Author: DruidAllanon42
// ============================================================================

ClassSubList["shaman-speaker of seasons"] = {
	regExpSearch : /^(?=.*speaker)(?=.*seasons).*$/i,
	subname : "Speaker of Seasons",
	source : ["DA42:SS", 5],

	spellcastingExtra : [
		"faerie fire", "absorb elements",
		"moonbeam", "enhance ability",
		"plant growth", "elemental weapon",
		"freedom of movement", "ice storm",
		"antilife shell", "control weather"
	],

	features : {

		"subclassfeature1" : {
			name : "Blessings of Seasons",
			source : ["DA42:SS", 5],
			minlevel : 1,
			description : desc([
				"After each long rest, I adopt a Seasonal Aspect: Spring, Summer, Autumn, or Winter",
				"I learn three cantrips based on my current Aspect (see choice below); these count as shaman cantrips",
				"I gain proficiency in Nature or Survival (choose one; note it in the skills section)"
			]),
			skillstxt : "\n\n" + toUni("Blessings of Seasons") + ": Choose one from Nature or Survival.",
			choices : ["Spring Aspect", "Summer Aspect", "Autumn Aspect", "Winter Aspect"],

			"spring aspect" : {
				name : "Seasonal Aspect: Spring",
				source : ["DA42:SS", 5],
				description : desc([
					"Spring Boon: When I restore HP to a creature, it gains temp HP equal to my Cha modifier (once per turn)"
				]),
				spellcastingBonus : [{
					name : "Spring Aspect",
					spells : ["druidcraft", "guidance", "spare the dying"],
					selection : ["druidcraft", "guidance", "spare the dying"],
					times : 3
				}]
			},

			"summer aspect" : {
				name : "Seasonal Aspect: Summer",
				source : ["DA42:SS", 5],
				description : desc([
					"Summer Boon: When I deal spell damage, I can add my Cha modifier to one damage roll per turn"
				]),
				spellcastingBonus : [{
					name : "Summer Aspect",
					spells : ["produce flame", "create bonfire", "thaumaturgy"],
					selection : ["produce flame", "create bonfire", "thaumaturgy"],
					times : 3
				}]
			},

			"autumn aspect" : {
				name : "Seasonal Aspect: Autumn",
				source : ["DA42:SS", 5],
				description : desc([
					"Autumn Boon: I have advantage on Deception and Insight checks, and I can't be surprised while conscious"
				]),
				spellcastingBonus : [{
					name : "Autumn Aspect",
					spells : ["minor illusion", "vicious mockery", "mage hand"],
					selection : ["minor illusion", "vicious mockery", "mage hand"],
					times : 3
				}]
			},

			"winter aspect" : {
				name : "Seasonal Aspect: Winter",
				source : ["DA42:SS", 5],
				description : desc([
					"Winter Boon: I gain resistance to cold damage",
					"Winter Boon: Hostile creatures within 10 ft treat the area as difficult terrain the first time each turn they enter it"
				]),
				spellcastingBonus : [{
					name : "Winter Aspect",
					spells : ["frostbite", "ray of frost", "resistance"],
					selection : ["frostbite", "ray of frost", "resistance"],
					times : 3
				}]
			}
		},

		"subclassfeature6" : {
			name : "Turning of the Wheel",
			source : ["DA42:SS", 5],
			minlevel : 6,
			description : desc([
				"Once per short rest, as a bonus action, I can shift my Seasonal Aspect for 1 minute",
				"When I shift, I also gain an immediate effect based on the new season:",
				"Spring: I or an ally within 30 ft regains HP equal to 2d8 + Cha modifier",
				"Summer: One creature within 30 ft takes fire or radiant damage equal to 2d8 + Cha modifier",
				"Autumn: One creature within 30 ft must make a save or have disadvantage on attacks until end of its next turn",
				"Winter: I create a 10-ft-radius patch of numbing cold (difficult terrain) within 60 ft for 1 minute"
			]),
			usages : 1,
			recovery : "short rest",
			action : [["bonus action", ""]]
		},

		"subclassfeature10" : {
			name : "Court of Seasons",
			source : ["DA42:SS", 5],
			minlevel : 10,
			description : desc([
				"While conscious, I project a 10-ft aura based on my current Seasonal Aspect:",
				"Spring: Allies have advantage vs poison/disease and regain +1d4 HP when they receive healing",
				"Summer: Allies have advantage on saving throws against being frightened",
				"Autumn: Enemies have disadvantage on Perception checks and can't benefit from being hidden from me",
				"Winter: Enemies have their speed reduced by 10 ft while in the aura (no save)"
			])
		},

		"subclassfeature14" : {
			name : "Sovereign Cycle",
			source : ["DA42:SS", 5],
			minlevel : 14,
			description : desc([
				"Once per long rest, as an action, I invoke the Full Cycle for 1 minute",
				"At the start of each of my turns, I may change my Seasonal Aspect (no action)",
				"The first time each turn I change aspect, I trigger that season's Turning of the Wheel immediate effect (no bonus action)"
			]),
			usages : 1,
			recovery : "long rest",
			action : [["action", ""]]
		}
	}
};

// ============================================================================
// Speaker of Glamour (Shamanic Calling)
// Author: DruidAllanon42
// ============================================================================

ClassSubList["shaman-speaker of glamour"] = {
	regExpSearch : /^(?=.*speaker)(?=.*glamour).*$/i,
	subname : "Speaker of Glamour",
	source : ["DA42:SS", 6],

	spellcastingExtra : [
		"charm person", "faerie fire",
		"enthrall", "calm emotions",
		"hypnotic pattern", "tongues",
		"compulsion", "charm monster",
		"modify memory", "seeming"
	],

	features : {

		"subclassfeature1" : {
			name : "Blessings of Glamour",
			source : ["DA42:SS", 6],
			minlevel : 1,
			description : desc([
				"I learn the Friends, Thaumaturgy, and Minor Illusion cantrips as shaman cantrips",
				"I gain proficiency in Performance or Persuasion (choose one)"
			]),
			skillstxt : "\n\n" + toUni("Blessings of Glamour") + ": Choose one from Performance or Persuasion.",
			spellcastingBonus : [{
				name : "Blessings of Glamour",
				spells : ["friends", "thaumaturgy", "minor illusion"],
				selection : ["friends", "thaumaturgy", "minor illusion"],
				times : 3
			}]
		},

		"subclassfeature1.1" : {
			name : "Glamourspeaker",
			source : ["DA42:SS", 6],
			minlevel : 1,
			description : desc([
				"As a bonus action, I heighten my presence toward one creature within 30 ft that can see and hear me",
				"Until the end of my next turn, that creature has disadvantage on the next Wis save it makes against a charm or fear effect I cause"
			]),
			usages : "Cha mod",
			recovery : "long rest",
			action : [["bonus action", ""]]
		},

		"subclassfeature6" : {
			name : "Borrowed Radiance",
			source : ["DA42:SS", 6],
			minlevel : 6,
			description : desc([
				"When a creature within 30 ft fails a save against being charmed or frightened by me, I gain a benefit",
				"I choose either temp HP equal to my Cha mod + proficiency bonus, or advantage on my next attack roll or ability check",
				"I can gain this benefit once per turn"
			])
		},

		"subclassfeature10" : {
			name : "Courtly Presence",
			source : ["DA42:SS", 6],
			minlevel : 10,
			description : desc([
				"I have advantage on saving throws against being charmed or frightened",
				"When a creature attempts to charm or frighten me and fails, I may use my reaction",
				"That creature must succeed on a Wis save or be charmed by me until the end of its next turn"
			]),
			action : [["reaction", ""]]
		},

		"subclassfeature14" : {
			name : "Sovereign Allure",
			source : ["DA42:SS", 6],
			minlevel : 14,
			description : desc([
				"Once per long rest, as an action, I emanate an aura of undeniable presence for 1 minute",
				"Hostile creatures within 20 ft have disadvantage on saves against being charmed or frightened by me",
				"The first time a creature becomes charmed or frightened by me during this aura, it is incapacitated until the end of its next turn",
				"Creatures that succeed on a save against this aura are immune to it for 24 hours"
			]),
			usages : 1,
			recovery : "long rest",
			action : [["action", ""]]
		}
	}
};

// ============================================================================
// Speaker of Masks (Shamanic Calling)
// Author: DruidAllanon42
// ============================================================================

ClassSubList["shaman-speaker of masks"] = {
	regExpSearch : /^(?=.*speaker)(?=.*masks?).*$/i,
	subname : "Speaker of Masks",
	source : ["DA42:SS", 7],

	spellcastingExtra : [
		"disguise self", "silent image",
		"alter self", "pass without trace",
		"nondetection", "feign death",
		"greater invisibility", "freedom of movement",
		"mislead", "seeming"
	],

	features : {

		"subclassfeature1" : {
			name : "Blessings of Masks",
			source : ["DA42:SS", 7],
			minlevel : 1,
			description : desc([
				"I can cast Friends and Message at will, without expending spirit points",
				"I learn Disguise Self, which counts as a shaman spell for me",
				"I gain proficiency in Deception and choose one from Performance or Stealth"
			]),
			skills : ["Deception"],
			skillstxt : "\n\n" + toUni("Blessings of Masks") + ": Deception, and choose one from Performance or Stealth.",
			spellcastingBonus : [{
				name : "Blessings of Masks (at will)",
				spells : ["friends", "message"],
				selection : ["friends", "message"],
				atwill : true,
				times : 2
			}, {
				name : "Blessings of Masks",
				spells : ["disguise self"],
				selection : ["disguise self"],
				known : true
			}]
		},

		"subclassfeature1.1" : {
			name : "Maskspeaker",
			source : ["DA42:SS", 7],
			minlevel : 1,
			description : desc([
				"After observing a humanoid for at least 1 minute, I can spend 10 minutes attuning to a Mask (a social role)",
				"While wearing a Mask: I have advantage on Cha checks to pass as that role",
				"Creatures have disadvantage on Insight checks to detect my deception",
				"This doesn't grant a physical disguise, mimicry of voice, or the creature's knowledge",
				"I can maintain only one Mask at a time; creating a new one ends the previous"
			]),
			action : [["action", " (attune: 10 min)"]]
		},

		"subclassfeature6" : {
			name : "Courtly Poison",
			source : ["DA42:SS", 7],
			minlevel : 6,
			description : desc([
				"Once per turn, when I deal damage to a creature that is charmed by me, surprised by me, or unaware of my true intent",
				"I may deal extra poison or psychic damage (my choice) equal to my proficiency bonus",
				"This represents spiritual influence and courtly pressure, not a physical toxin"
			])
		},

		"subclassfeature10" : {
			name : "Stolen Bearing",
			source : ["DA42:SS", 7],
			minlevel : 10,
			description : desc([
				"As a reaction when a creature I can see within 30 ft fails a saving throw, I steal its bearing until end of my next turn",
				"I have advantage on attack rolls against it",
				"It has disadvantage on saving throws against my shaman spells and features"
			]),
			usages : "Cha mod",
			recovery : "long rest",
			action : [["reaction", ""]]
		},

		"subclassfeature14" : {
			name : "Shattered Masquerade",
			source : ["DA42:SS", 7],
			minlevel : 14,
			description : desc([
				"Once per long rest, as an action, I unravel false identities for 1 minute",
				"Creatures of my choice within 20 ft can't gain advantage on Deception or Stealth checks",
				"Creatures relying on disguises/false identities/assumed allegiances have disadvantage on saves vs my spells/features",
				"When a creature fails a saving throw against me for the first time on a turn, it's frightened of me until end of its next turn"
			]),
			usages : 1,
			recovery : "long rest",
			action : [["action", ""]]
		}
	}
};

// ============================================================================
// Speaker of Venom (Shamanic Calling)
// Author: DruidAllanon42
// ============================================================================

ClassSubList["shaman-speaker of venom"] = {
	regExpSearch : /^(?=.*speaker)(?=.*venom|poison).*$/i,
	subname : "Speaker of Venom",
	source : ["DA42:SS", 9],

	spellcastingExtra : [
		"ray of sickness", "detect poison and disease",
		"protection from poison", "suggestion",
		"stinking cloud", "bestow curse",
		"blight", "greater invisibility",
		"cloudkill", "dominate person"
	],

	features : {
		"subclassfeature1" : {
			name : "Blessings of Venom",
			source : ["DA42:SS", 9],
			minlevel : 1,
			description : desc([
				"I learn the Poison Spray, Druidcraft, and Minor Illusion cantrips as shaman cantrips",
				"I gain proficiency with the poisoner's kit",
				"I gain proficiency in Deception or Medicine (choose one)",
				"I have advantage on ability checks to identify poisons and detect tainted food or drink"
			]),
			toolProfs : [["Poisoner's kit", true]],
			skillstxt : "\n\n" + toUni("Blessings of Venom") + ": Choose one from Deception or Medicine.",
			spellcastingBonus : [{
				name : "Blessings of Venom",
				spells : ["poison spray", "druidcraft", "minor illusion"],
				selection : ["poison spray", "druidcraft", "minor illusion"],
				times : 3
			}]
		},

		"subclassfeature1.1" : {
			name : "Venomspeaker",
			source : ["DA42:SS", 9],
			minlevel : 1,
			description : desc([
				"As an action, I touch a poison/venom/toxic plant or tainted food/drink and ask three questions",
				"It answers in impressions (urgency/hunger/patience/rage), not exact words"
			]),
			usages : 1,
			recovery : "short rest",
			action : [["action", ""]]
		},

		"subclassfeature6" : {
			name : "Measured Dose",
			source : ["DA42:SS", 9],
			minlevel : 6,
			description : desc([
				"Once per turn when I deal damage with a shaman spell or feature, I impose one Dose until start of my next turn",
				"Bitter Breath: target speed -10 ft; Numbing Veins: target can't take reactions; Blurred Tongue: dis. on next ability check",
				"A creature can be affected by only one Dose at a time"
			]),
			usages : "Proficiency bonus per ",
			recovery : "short rest"
		},

		"subclassfeature10" : {
			name : "Antidote Rite",
			source : ["DA42:SS", 9],
			minlevel : 10,
			description : desc([
				"As an action, I can spend 1 spirit point to end poisoned, paralyzed, or blinded on a creature I touch",
				"Alternatively, I neutralize one poison affecting it and it has advantage on saves vs poison for 1 hour"
			]),
			usages : "Cha mod",
			recovery : "long rest",
			action : [["action", ""]]
		},

		"subclassfeature14" : {
			name : "Court of Serpents",
			source : ["DA42:SS", 9],
			minlevel : 14,
			description : desc([
				"Once per long rest, as an action, I invoke a 20-ft aura for 1 minute",
				"Hostiles have disadvantage on saves vs my poison and necrotic effects",
				"First time each turn a hostile within aura deals damage to me or ally, it takes poison or psychic damage = my proficiency bonus",
				"Whenever I apply a Dose, I may also deal extra poison damage = my Cha modifier",
				"A creature that succeeds on a saving throw against this aura is immune for 24 hours"
			]),
			usages : 1,
			recovery : "long rest",
			action : [["action", ""]]
		}
	}
};

// ============================================================================
// Speaker of Roots (Shamanic Calling)
// Author: DruidAllanon42
// ============================================================================

ClassSubList["shaman-speaker of roots"] = {
	regExpSearch : /^(?=.*speaker)(?=.*roots?).*$/i,
	subname : "Speaker of Roots",
	source : ["DA42:SS", 10],

	spellcastingExtra : [
		"entangle", "goodberry",
		"barkskin", "pass without trace",
		"plant growth", "speak with plants",
		"grasping vine", "freedom of movement",
		"tree stride", "commune with nature"
	],

	features : {

		"subclassfeature1" : {
			name : "Blessings of Roots",
			source : ["DA42:SS", 10],
			minlevel : 1,
			description : desc([
				"I learn Druidcraft, Mold Earth, and Thorn Whip as shaman cantrips",
				"I gain proficiency in Nature or Survival (choose one)",
				"I ignore difficult terrain created by plants and natural undergrowth",
				"While in contact with the ground, I always know true north"
			]),
			skillstxt : "\n\n" + toUni("Blessings of Roots") + ": Choose one from Nature or Survival.",
			spellcastingBonus : [{
				name : "Blessings of Roots",
				spells : ["druidcraft", "mold earth", "thorn whip"],
				selection : ["druidcraft", "mold earth", "thorn whip"],
				times : 3
			}]
		},

		"subclassfeature1.1" : {
			name : "Rootspeaker",
			source : ["DA42:SS", 10],
			minlevel : 1,
			description : desc([
				"As an action while touching natural ground, I can ask local root-spirits three questions",
				"Answers are impressions about movement, water, disturbed earth/hidden hollows, and unnatural taint",
				"Once used, I can't use this again until I finish a short or long rest"
			]),
			usages : 1,
			recovery : "short rest",
			action : [["action", ""]]
		},

		"subclassfeature6" : {
			name : "Rootbound Step",
			source : ["DA42:SS", 10],
			minlevel : 6,
			description : desc([
				"Reaction: when I or an ally within 30 ft would be pushed/pulled/knocked prone/moved against their will, I root them",
				"Choose: the target isn't moved and isn't knocked prone, OR it moves up to 5 ft and isn't knocked prone",
				"Afterward, the target's speed is reduced by 10 ft until the end of its next turn"
			]),
			usages : "Proficiency bonus per ",
			recovery : "short rest",
			action : [["reaction", ""]]
		},

		"subclassfeature10" : {
			name : "Living Lattice",
			source : ["DA42:SS", 10],
			minlevel : 10,
			description : desc([
				"While touching natural ground, I gain tremorsense 10 ft",
				"I have advantage on Perception checks to detect creatures/objects in contact with the same ground",
				"I have resistance to poison damage and advantage on saves against being poisoned",
				"I can communicate simple ideas to plants without magic (grow/open/still/warn)"
			]),
			dmgres : ["Poison"],
			savetxt : { adv_vs : ["being poisoned"] }
		},

		"subclassfeature14" : {
			name : "Worldroot Passage",
			source : ["DA42:SS", 10],
			minlevel : 14,
			description : desc([
				"Once per long rest, as an action while touching natural ground, I and up to 8 willing creatures within 10 ft travel via roots",
				"We emerge in an unoccupied space I can see within 300 ft that is also natural ground",
				"This doesn't provoke opportunity attacks and ignores nonmagical barriers between points",
				"It can't pass through worked stone or metal foundations thicker than 5 ft"
			]),
			usages : 1,
			recovery : "long rest",
			action : [["action", ""]]
		}
	}
};

// ============================================================================
// Speaker of the Wild Hunt (Shamanic Calling)
// Author: DruidAllanon42
// ============================================================================

ClassSubList["shaman-speaker of the wild hunt"] = {
	regExpSearch : /^(?=.*speaker)(?=.*wild)(?=.*hunt).*$/i,
	subname : "Speaker of the Wild Hunt",
	source : ["DA42:SS", 11],

	spellcastingExtra : [
		"hunter's mark", "longstrider",
		"pass without trace", "hold person",
		"haste", "fear",
		"freedom of movement", "locate creature",
		"steel wind strike", "hold monster"
	],

	features : {

		"subclassfeature1" : {
			name : "Blessings of the Hunt",
			source : ["DA42:SS", 11],
			minlevel : 1,
			description : desc([
				"I learn Primal Savagery, Guidance, and Thaumaturgy as shaman cantrips",
				"I gain proficiency in Survival and Intimidation",
				"My speed increases by 10 ft while not wearing heavy armor",
				"I have advantage on Survival checks to track creatures I've seen within the last 24 hours"
			]),
			skills : ["Survival", "Intimidation"],
			spellcastingBonus : [{
				name : "Blessings of the Hunt",
				spells : ["primal savagery", "guidance", "thaumaturgy"],
				selection : ["primal savagery", "guidance", "thaumaturgy"],
				times : 3
			}],
			speed : { allModes : "+10" }
		},

		"subclassfeature1.1" : {
			name : "Huntspeaker",
			source : ["DA42:SS", 11],
			minlevel : 1,
			description : desc([
				"Bonus action: I name a creature I can see within 60 ft as my Quarry (not incapacitated)",
				"While within 1 mile, I always know the direction of my Quarry",
				"I have advantage on Perception/Survival checks to locate or follow my Quarry",
				"Once per turn, when I hit my Quarry with a weapon attack or shaman spell, I deal extra damage = proficiency bonus"
			]),
			usages : "Cha mod",
			recovery : "long rest",
			action : [["bonus action", " (name Quarry)"]]
		},

		"subclassfeature6" : {
			name : "Relentless Advance",
			source : ["DA42:SS", 11],
			minlevel : 6,
			description : desc([
				"When I move toward my Quarry on my turn, difficult terrain doesn't cost me extra movement",
				"Opportunity attacks against me are made at disadvantage while I'm moving toward my Quarry",
				"Reaction: when my Quarry teleports or magically moves away, I move up to half my speed toward the space it left or appeared in"
			]),
			usages : "Proficiency bonus per ",
			recovery : "short rest",
			action : [["reaction", " (Quarry moves)"]]
		},

		"subclassfeature10" : {
			name : "Terror of the Chase",
			source : ["DA42:SS", 11],
			minlevel : 10,
			description : desc([
				"When my Quarry starts its turn within 30 ft, it must make a Wis save vs my shaman spell DC",
				"Fail: its speed -10 until start of its next turn and it has disadvantage on its first attack roll or saving throw that turn",
				"Success: it is immune to this effect for 24 hours (the Quarry remains marked)"
			])
		},

		"subclassfeature14" : {
			name : "The Wild Hunt Rides",
			source : ["DA42:SS", 11],
			minlevel : 14,
			description : desc([
				"Once per long rest, as an action, I invoke the Wild Hunt for 1 minute",
				"I gain a spectral mount or hunting form; my speed increases by 20 ft; I ignore penalties for water/mud/snow/undergrowth",
				"I may move through hostile creatures' spaces (as difficult terrain)",
				"My Quarry has disadvantage on saves vs being frightened, restrained, or knocked prone by me",
				"First time each turn I deal damage to my Quarry, it takes extra psychic damage = my Cha modifier",
				"If my Quarry drops to 0 HP, I may name a new Quarry immediately without expending a Huntspeaker use"
			]),
			usages : 1,
			recovery : "long rest",
			action : [["action", ""]]
		}
	}
};

// ============================================================================
// Speaker of Hearth (Shamanic Calling)
// Author: DruidAllanon42
// ============================================================================

ClassSubList["shaman-speaker of hearth"] = {
	regExpSearch : /^(?=.*speaker)(?=.*hearth).*$/i,
	subname : "Speaker of Hearth",
	source : ["DA42:SS", 12],

	spellcastingExtra : [
		"goodberry", "sanctuary",
		"aid", "calm emotions",
		"beacon of hope", "leomund's tiny hut",
		"aura of life", "private sanctum",
		"greater restoration", "hallow"
	],

	features : {

		"subclassfeature1" : {
			name : "Blessings of the Hearth",
			source : ["DA42:SS", 12],
			minlevel : 1,
			description : desc([
				"I learn Spare the Dying, Guidance, and Thaumaturgy as shaman cantrips",
				"I gain proficiency in Medicine and Persuasion",
				"As an action, I can create a small harmless flame (like a candle ember)",
				"While I'm conscious, allies within 5 ft of me have advantage on saves vs being frightened"
			]),
			skills : ["Medicine", "Persuasion"],
			spellcastingBonus : [{
				name : "Blessings of the Hearth",
				spells : ["spare the dying", "guidance", "thaumaturgy"],
				selection : ["spare the dying", "guidance", "thaumaturgy"],
				times : 3
			}],
			action : [["action", " (small harmless flame)"]],
			savetxt : { text : ["Allies within 5 ft: Adv. on saves vs frightened (while I'm conscious)"] }
		},

		"subclassfeature1.1" : {
			name : "Hearthspeaker",
			source : ["DA42:SS", 12],
			minlevel : 1,
			description : desc([
				"As an action while within a dwelling, campsite, or willing resting place, I can ask Hearth-spirits three questions",
				"Questions can concern recent violence, who rested safely, whether the place feels welcoming/strained/violated, or how to restore it",
				"Once used, I can't use this again until I finish a short or long rest"
			]),
			usages : 1,
			recovery : "short rest",
			action : [["action", ""]]
		},

		"subclassfeature6" : {
			name : "Shared Warmth",
			source : ["DA42:SS", 12],
			minlevel : 6,
			description : desc([
				"Once per short rest as a bonus action, I choose a number of creatures within 30 ft up to my Cha modifier (min 1)",
				"Each gains temporary HP equal to my shaman level for 1 minute",
				"While a creature has these temp HP, it has advantage on saves vs being charmed or frightened"
			]),
			usages : 1,
			recovery : "short rest",
			action : [["bonus action", ""]]
		},

		"subclassfeature10" : {
			name : "Circle of Shelter",
			source : ["DA42:SS", 12],
			minlevel : 10,
			description : desc([
				"Once per long rest as an action, I create a Hearth Circle centered on me (15-ft radius) for 1 minute (no concentration)",
				"Allies inside have resistance to cold and fire damage",
				"At the start of an ally's turn inside, if it has less than half its HP max, it regains HP equal to my Cha modifier",
				"Hostiles have disadvantage on ability checks made to intimidate or frighten creatures inside"
			]),
			usages : 1,
			recovery : "long rest",
			action : [["action", ""]],
			dmgres : ["Cold", "Fire"]
		},

		"subclassfeature14" : {
			name : "The Hearth Endures",
			source : ["DA42:SS", 12],
			minlevel : 14,
			description : desc([
				"Once per long rest as a reaction, when I or an ally within 30 ft would drop to 0 HP, it instead drops to 1 HP",
				"It then regains HP equal to my Cha modifier + my shaman level and may stand up if prone",
				"Until the end of its next turn, it is immune to being frightened",
				"Until the end of its next turn, it has advantage on its next attack roll, ability check, or saving throw"
			]),
			usages : 1,
			recovery : "long rest",
			action : [["reaction", " (prevent 0 HP)"]],
			savetxt : { text : ["The Hearth Endures target: Immune to frightened until end of its next turn"] }
		}
	}
};

// End of Shaman - Speakers Supplemental
